# MediaMTX Configuration for OpenSentry Node

# General settings
logLevel: info
logDestinations: [stdout]

# RTSP server
rtsp: yes
protocols: [tcp]
rtspAddress: :8554

# RTMP server  
rtmp: yes
rtmpAddress: :1935

# HLS server
hls: yes
hlsAddress: :8888

# WebRTC server
webrtc: yes
webrtcAddress: :8889

# Path configuration with authentication
# Credentials are injected via environment variables
paths:
  all:
    # Allow publishing from localhost only (the camera node)
    source: publisher
    # Read authentication - viewers must authenticate
    readUser: $RTSP_USERNAME
    readPass: $RTSP_PASSWORD
    # Publish restricted to localhost IPs (no auth needed for local)
    publishIPs: [127.0.0.1, ::1]

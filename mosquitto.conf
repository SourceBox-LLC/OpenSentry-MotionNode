# Mosquitto MQTT Broker Configuration for OpenSentry Node
# Bundled broker for self-contained deployment

# Plain MQTT on localhost only (for internal C++ client)
# Using 1884 to avoid conflict with host mosquitto on 1883
listener 1884 127.0.0.1

# MQTT over TLS on all interfaces (for external connections)
listener 8883 0.0.0.0
cafile /app/certs/server.crt
certfile /app/certs/server.crt
keyfile /app/certs/server.key
require_certificate false

# Authentication - require username/password
allow_anonymous false
password_file /etc/mosquitto/passwd

# Logging
log_dest stdout
log_type error
log_type warning
log_type notice

# Persistence (disabled for container)
persistence false
